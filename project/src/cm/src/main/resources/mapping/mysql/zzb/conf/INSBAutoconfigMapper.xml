<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zzb.conf.entity">
	<!-- INSBAutoconfig -->
	<select id="INSBAutoconfig_insert" parameterType="com.zzb.conf.entity.INSBAutoconfig" resultType="int">
		insert into INSBAutoconfig
		(id,operator,createtime,modifytime,noti,conftype,quotetype,codevalue,contentid,deptid,providerid) 
		values
		(#{id},#{operator},#{createtime},#{modifytime},#{noti},#{conftype},#{quotetype},#{codevalue},#{contentid},#{deptid},#{providerid}) 
	</select>
	
	<select id="INSBAutoconfig_select" parameterType="Map" resultType="com.zzb.conf.entity.INSBAutoconfig">
		select * from INSBAutoconfig
		<where>
			<if test="conftype != null">
				and conftype like CONCAT('%',#{conftype},'%') 
			</if>
			<if test="quotetype != null">
				and quotetype = #{quotetype}
			</if>
			<if test="codevalue != null">
				and codevalue = #{codevalue}
			</if>
			<if test="contentid != null">
				and contentid = #{contentid}
			</if>
			<if test="deptid != null">
				and deptid = #{deptid}
			</if>
			<if test="providerid != null">
				and providerid = #{providerid}
			</if>
		</where>
	</select>
	<select id="INSBAutoconfig_selectContendIdByParam" parameterType="Map" resultType="String">
		select contentid from INSBAutoconfig
		<where>
			<!-- 精灵EDI -->
			<if test="quotetype != null and quotetype !=''">
				and quotetype = #{quotetype}
			</if>
			<!-- 网点信息 -->
			<if test="deptid != null and deptid !=''">
				and deptid = #{deptid}
			</if>
			<!-- 供应商信息 -->
			<if test="providerid != null and providerid !=''">
				and providerid = #{providerid}
			</if>
			<if test="conftype !=null and conftype !=''">
			and FIND_IN_SET(#{conftype},conftype)
			</if>
		</where>
		limit 1
	</select>
	<select id="INSBAutoconfig_selectOne" parameterType="Map" resultType="com.zzb.conf.entity.INSBAutoconfig">
		select * from INSBAutoconfig
		<where>
			<if test="conftype != null">
				and conftype like CONCAT('%',#{conftype},'%') 
			</if>
			<if test="quotetype != null">
				and quotetype = #{quotetype}
			</if>
			<if test="codevalue != null">
				and codevalue = #{codevalue}
			</if>
			<if test="contentid != null">
				and contentid = #{contentid}
			</if>
			<if test="deptid != null">
				and deptid = #{deptid}
			</if>
			<if test="providerid != null">
				and providerid = #{providerid}
			</if>
		</where>
		LIMIT 2
	</select>
	
	
	<select id="INSBAutoconfig_selectById" parameterType="String" resultType="com.zzb.conf.entity.INSBAutoconfig">
		select * from INSBAutoconfig where id = #{id}
	</select>
	
	
	<select id="INSBAutoconfig_selectComcodeBbyContenIdAndProviderId" parameterType="Map" resultType="Map">
		select id,deptid from INSBAutoconfig where contentid = #{contentid} and providerid=#{providerid}
	</select>
	<select id="INSBAutoconfig_deleteById" parameterType="String">
		delete from INSBAutoconfig where id = #{id}
	</select>
	<select id="INSBAutoconfig_updateById" parameterType="com.zzb.conf.entity.INSBAutoconfig">
		update INSBAutoconfig  set operator = #{operator},modifytime = #{modifytime},noti = #{noti},conftype = #{conftype},quotetype = #{quotetype},codevalue = #{codevalue},contentid = #{contentid},deptid = #{deptid},providerid = #{providerid} where id = #{id}
	</select>
	<select id="INSBAutoconfig_selectCount" parameterType="Map" resultType="Long">
		select count(1) from INSBAutoconfig
		<where>
			<if test="conftype != null">
				and conftype = #{conftype}
			</if>
			<if test="quotetype != null">
				and quotetype = #{quotetype}
			</if>
			<if test="codevalue != null">
				and codevalue = #{codevalue}
			</if>
			<if test="contentid != null">
				and contentid = #{contentid}
			</if>
			<if test="deptid != null">
				and deptid = #{deptid}
			</if>
			<if test="providerid != null">
				and providerid = #{providerid}
			</if>
		</where>
	</select>
<!-- 	<select id="INSBAutoconfig_selectByAgreementId" parameterType="Map" resultType="String"> -->
<!-- 		select GROUP_CONCAT(codevalue) codevalue FROM insbautoconfig WHERE agreementid  = #{agreementid} AND -->
<!-- 		conftype = #{conftype}  -->
<!-- 	</select> -->
	
<!-- 	<select id="INSBAutoconfig_getQuoteType" parameterType="Map" resultType="com.zzb.conf.entity.INSBAutoconfig"> -->
<!-- 		select * FROM insbautoconfig  -->
<!-- 		WHERE  agreementid =  #{agreementid} AND conftype = '01' AND quotetype= #{quotecode} -->
<!--  		ORDER BY createtime DESC -->
<!-- 		LIMIT 1 -->
<!-- 	</select> -->

<!-- 	<select id="INSBAutoconfig_getContracthbType" parameterType="Map" resultType="com.zzb.conf.entity.INSBAutoconfig"> -->
<!-- 		select * FROM insbautoconfig  -->
<!-- 		WHERE  agreementid =  #{agreementid} AND conftype = #{conftype} AND quotetype= #{quotecode} -->
<!--  		ORDER BY createtime DESC -->
<!-- 		LIMIT 1 -->
<!-- 	</select> -->
<!-- 	<select id="INSBAutoconfig_deleteByAgreementId" parameterType="Map" > -->
<!-- 		DELETE FROM insbautoconfig WHERE agreementid = #{agreementid} and conftype = #{conftype} -->
<!-- 	</select> -->
	
	<select id="INSBAutoconfig_deletebyelfid" parameterType="Map" >
		DELETE FROM insbautoconfig WHERE quotetype = #{quotetype} and contentid = #{contentid}
	</select>
	<select id="INSBAutoconfig_providerid" parameterType="Map" resultType="String">
		select DISTINCT quotetype  FROM insbautoconfig WHERE  FIND_IN_SET(#{conftype},conftype) AND providerid = #{providerid} AND deptid = #{deptid} 
	</select>
	<select id="INSBAutoconfig_deleteautobyshowid" parameterType="Map" resultType="Integer">
		DELETE FROM insbautoconfig where codevalue = #{codevalue} and deptid = #{deptid}
	</select>
	<select id="INSBAutoconfig_deleteautobyshowidonly" parameterType="Map">
		DELETE FROM insbautoconfig where codevalue = #{id} and quotetype = #{quotetype};
	</select>
</mapper>