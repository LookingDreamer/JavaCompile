<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cninsure.system.entity">
	<!-- INSCMenu -->
	<select id="INSCMenu_insert" parameterType="com.cninsure.system.entity.INSCMenu"
		resultType="int">
		insert into INSCMenu
		(id,operator,createtime,modifytime,noti,nodecode,parentnodecode,nodelevel,nodename,childflag,activeurl,iconurl,orderflag,status)
		values
		(#{id},#{operator},#{createtime},#{modifytime},#{noti},#{nodecode},#{parentnodecode},#{nodelevel},#{nodename},#{childflag},#{activeurl},#{iconurl},#{orderflag},#{status})
	</select>
	<select id="INSCMenu_select" parameterType="Map"
		resultType="com.cninsure.system.entity.INSCMenu">
		select * from INSCMenu
		<where>
			 <if test="nodecode != null">
			 and	nodecode = #{nodecode}	
			</if>
			<if test="parentnodecode != null">
			 and	parentnodecode = #{parentnodecode}	
			</if>
			<if test="nodelevel != null">
			 and	nodelevel = #{nodelevel}	
			</if>
			<if test="nodename != null">
			 and	nodename = #{nodename}	
			</if>
			<if test="childflag != null">
			 and	childflag = #{childflag}	
			</if>
			<if test="activeurl != null">
			 and	activeurl = #{activeurl}	
			</if>
			<if test="iconurl != null">
			 and	iconurl = #{iconurl}	
			</if>
			<if test="OrderFlag != null">
			 and	OrderFlag = #{OrderFlag}	
			</if>
			<if test="status != null">
			 and	status = #{status}	
			</if>                              
		</where>
	</select>
	<select id="INSCMenu_selectListMap" parameterType="Map" resultType="com.zzb.conf.controller.vo.MenuVo">
		SELECT m.id,activeurl as activeUrl,GROUP_CONCAT(rolecode) AS roleCode FROM inscMenu m
		LEFT JOIN inscRoleMenu rm  ON rm.`menuid`=m.`id`
		LEFT JOIN inscRole r ON r.`id`=rm.`roleid`
		WHERE activeurl!='' 
		GROUP BY id,activeurl
		LIMIT #{offset},#{limit}
	</select>
	<select id="INSCMenu_selectOne" parameterType="Map"
		resultType="com.cninsure.system.entity.INSCMenu">
		select * from INSCMenu
		<where>
			 <if test="nodecode != null">
			 and	nodecode = #{nodecode}	
			</if>
			<if test="parentnodecode != null">
			 and	parentnodecode = #{parentnodecode}	
			</if>
			<if test="nodelevel != null">
			 and	nodelevel = #{nodelevel}	
			</if>
			<if test="nodename != null">
			 and	nodename = #{nodename}	
			</if>
			<if test="childflag != null">
			 and	childflag = #{childflag}	
			</if>
			<if test="activeurl != null">
			 and	activeurl = #{activeurl}	
			</if>
			<if test="iconurl != null">
			 and	iconurl = #{iconurl}	
			</if>
			<if test="OrderFlag != null">
			 and	OrderFlag = #{OrderFlag}	
			</if>
			<if test="status != null">
			 and	status = #{status}	
			</if>                              
		</where>
		LIMIT 2
	</select>
	<select id="INSCMenu_selectById" parameterType="String"
		resultType="com.cninsure.system.entity.INSCMenu">
		select * from INSCMenu where id = #{value}
	</select>
	
	
	<select id="INSCMenu_selectCodeByIds4Menu" resultType="String">
		select nodecode from INSCMenu 
		<where>
			<choose>
				<when test="list != null and list.size()>0">
					and id in 
					<foreach collection="list" item="item" index="index" open="(" separator="," close=")">
						#{item}
					</foreach>
				</when>
				<otherwise>
					and 1=2
				</otherwise>
			</choose>
		</where>
	</select>
	<select id="INSCMenu_selectByParentNodeCode" parameterType="String"
		resultType="com.cninsure.system.entity.INSCMenu">
		select * from INSCMenu where parentnodecode = #{value} and status = '1' ORDER BY orderflag asc
	</select>
	<select id="INSCMenu_deleteById" parameterType="String">
		delete from
		INSCMenu where id = #{value}
	</select>
	<select id="INSCMenu_updateById" parameterType="com.cninsure.system.entity.INSCMenu">
		update
		INSCMenu set
		modifytime = #{modifytime},nodecode = #{nodecode},parentnodecode = #{parentnodecode},
		nodelevel = #{nodelevel},nodename = #{nodename},childflag = #{childflag},activeurl = #{activeurl},
		iconurl = #{iconurl},orderflag = #{orderflag},status = #{status},noti = #{noti}, operator = #{operator}
		where id =
		#{id}
	</select>
	<select id="INSCMenu_selectCount" parameterType="Map" resultType="long">
		select count(1) from INSCMenu
		<where>
			<if test="nodecode != null">
			 and	nodecode = #{nodecode}	
			</if>
			<if test="parentnodecode != null">
			 and	parentnodecode = #{parentnodecode}	
			</if>
			<if test="nodelevel != null">
			 and	nodelevel = #{nodelevel}	
			</if>
			<if test="nodename != null">
			 and	nodename = #{nodename}	
			</if>
			<if test="childflag != null">
			 and	childflag = #{childflag}	
			</if>
			<if test="activeurl != null">
			 and	activeurl = #{activeurl}	
			</if>
			<if test="iconurl != null">
			 and	iconurl = #{iconurl}	
			</if>
			<if test="OrderFlag != null">
			 and	OrderFlag = #{OrderFlag}	
			</if>
			<if test="status != null">
			 and	status = #{status}	
			</if>
		</where>
	</select>
	<select id="INSCMenu_selectByOrder" parameterType="String" resultType="com.cninsure.system.entity.INSCMenu">
		select * from INSCMenu where status='1' order by #{fieldName},orderflag  
	</select>
	<select id="INSCMenu_selectByNodeCode" parameterType="String" resultType="com.cninsure.system.entity.INSCMenu">
		select * from INSCMenu where nodecode=#{nodecode} 
	</select>

</mapper>