
update insbquoteinfo a, inscdept b set a.platforminnercode=SUBSTRING(b.deptinnercode,1,5)+0 WHERE a.deptcode=b.comcode and a.platforminnercode=0;
 
alter table insbquoteinfo drop primary key, add primary key(id,platforminnercode);

alter table insbquoteinfo PARTITION BY RANGE COLUMNS(platforminnercode) (
	PARTITION p1 VALUES LESS THAN (02001),
	PARTITION p2 VALUES LESS THAN (02002),
	PARTITION p3 VALUES LESS THAN (02003),
	PARTITION p4 VALUES LESS THAN (02004),
	PARTITION p5 VALUES LESS THAN (02005),
	PARTITION p6 VALUES LESS THAN (02006),
	PARTITION p7 VALUES LESS THAN (02007),
	PARTITION p8 VALUES LESS THAN (02008),
	PARTITION p9 VALUES LESS THAN (02009),
	PARTITION p10 VALUES LESS THAN (02010),
	PARTITION p11 VALUES LESS THAN (02011),
	PARTITION p12 VALUES LESS THAN (02012),
	PARTITION p13 VALUES LESS THAN (02014),
	PARTITION p14 VALUES LESS THAN (02015),
	PARTITION p15 VALUES LESS THAN (02016),
	PARTITION p16 VALUES LESS THAN (02017),
	PARTITION p17 VALUES LESS THAN (02018),
	PARTITION p18 VALUES LESS THAN (02019),
	PARTITION p19 VALUES LESS THAN (02020),
	PARTITION p20 VALUES LESS THAN (02021),
	PARTITION p21 VALUES LESS THAN (02023),
	PARTITION p22 VALUES LESS THAN (02024),
	PARTITION p23 VALUES LESS THAN (02027),
	PARTITION p24 VALUES LESS THAN (02028),
	PARTITION p25 VALUES LESS THAN (02029),
	PARTITION p26 VALUES LESS THAN (02030),
	PARTITION p27 VALUES LESS THAN (02031),
	PARTITION p28 VALUES LESS THAN (02032),
	PARTITION p29 VALUES LESS THAN (02033),
	PARTITION p30 VALUES LESS THAN (02034),
	PARTITION p31 VALUES LESS THAN (02035),
	PARTITION p32 VALUES LESS THAN (02036),
	PARTITION p33 VALUES LESS THAN (02037),
	PARTITION p34 VALUES LESS THAN (02038),
	PARTITION p35 VALUES LESS THAN (02039),
  PARTITION p36 VALUES LESS THAN (MAXVALUE)
);

alter table insbworkflowsub drop primary key, add primary key(id,createtime);

ALTER TABLE `insbworkflowsub` PARTITION by RANGE COLUMNS(createtime) (
	PARTITION p1 VALUES LESS THAN ('2017-04-01'),
  PARTITION p2 VALUES LESS THAN ('2017-05-01'),
  PARTITION p3 VALUES LESS THAN ('2017-06-01'),
  PARTITION p4 VALUES LESS THAN ('2017-07-01'),
  PARTITION p5 VALUES LESS THAN ('2017-08-01'),
  PARTITION p6 VALUES LESS THAN ('2017-09-01'),
  PARTITION p7 VALUES LESS THAN ('2017-10-01'),
  PARTITION p8 VALUES LESS THAN ('2017-11-01'),
  PARTITION p9 VALUES LESS THAN ('2017-12-01'),
  PARTITION p10 VALUES LESS THAN ('2018-01-01'),
  PARTITION p11 VALUES LESS THAN ('2018-02-01'),
  PARTITION p12 VALUES LESS THAN ('2018-03-01'),
  PARTITION p13 VALUES LESS THAN ('2018-04-01'),
  PARTITION p14 VALUES LESS THAN ('2018-05-01'),
  PARTITION p15 VALUES LESS THAN ('2018-06-01'),
  PARTITION p16 VALUES LESS THAN ('2018-07-01'),
  PARTITION p17 VALUES LESS THAN ('2018-08-01'),
  PARTITION p18 VALUES LESS THAN ('2018-09-01'),
  PARTITION p19 VALUES LESS THAN ('2018-10-01'),
  PARTITION p20 VALUES LESS THAN ('2018-11-01'),
  PARTITION p21 VALUES LESS THAN ('2018-12-01'),
  PARTITION p22 VALUES LESS THAN ('2019-01-01'),
  PARTITION p23 VALUES LESS THAN ('2019-02-01'),
  PARTITION p24 VALUES LESS THAN ('2019-03-01'),
  PARTITION p25 VALUES LESS THAN ('2019-04-01'),
  PARTITION p26 VALUES LESS THAN ('2019-05-01'),
  PARTITION p27 VALUES LESS THAN ('2019-06-01'),
  PARTITION p28 VALUES LESS THAN ('2019-07-01'),
  PARTITION p29 VALUES LESS THAN ('2019-08-01'),
  PARTITION p30 VALUES LESS THAN ('2019-09-01'),
  PARTITION p31 VALUES LESS THAN ('2019-10-01'),
  PARTITION p32 VALUES LESS THAN ('2019-11-01'),
  PARTITION p33 VALUES LESS THAN ('2019-12-01'),
  PARTITION p34 VALUES LESS THAN ('2020-01-01'),
  PARTITION p99 VALUES LESS THAN (MAXVALUE)
);

alter table insbworkflowsubtrack drop primary key, add primary key(id,createtime);

ALTER TABLE `insbworkflowsubtrack` PARTITION by RANGE COLUMNS(createtime) (
	PARTITION p1 VALUES LESS THAN ('2017-04-01'),
  PARTITION p2 VALUES LESS THAN ('2017-05-01'),
  PARTITION p3 VALUES LESS THAN ('2017-06-01'),
  PARTITION p4 VALUES LESS THAN ('2017-07-01'),
  PARTITION p5 VALUES LESS THAN ('2017-08-01'),
  PARTITION p6 VALUES LESS THAN ('2017-09-01'),
  PARTITION p7 VALUES LESS THAN ('2017-10-01'),
  PARTITION p8 VALUES LESS THAN ('2017-11-01'),
  PARTITION p9 VALUES LESS THAN ('2017-12-01'),
  PARTITION p10 VALUES LESS THAN ('2018-01-01'),
  PARTITION p11 VALUES LESS THAN ('2018-02-01'),
  PARTITION p12 VALUES LESS THAN ('2018-03-01'),
  PARTITION p13 VALUES LESS THAN ('2018-04-01'),
  PARTITION p14 VALUES LESS THAN ('2018-05-01'),
  PARTITION p15 VALUES LESS THAN ('2018-06-01'),
  PARTITION p16 VALUES LESS THAN ('2018-07-01'),
  PARTITION p17 VALUES LESS THAN ('2018-08-01'),
  PARTITION p18 VALUES LESS THAN ('2018-09-01'),
  PARTITION p19 VALUES LESS THAN ('2018-10-01'),
  PARTITION p20 VALUES LESS THAN ('2018-11-01'),
  PARTITION p21 VALUES LESS THAN ('2018-12-01'),
  PARTITION p22 VALUES LESS THAN ('2019-01-01'),
  PARTITION p23 VALUES LESS THAN ('2019-02-01'),
  PARTITION p24 VALUES LESS THAN ('2019-03-01'),
  PARTITION p25 VALUES LESS THAN ('2019-04-01'),
  PARTITION p26 VALUES LESS THAN ('2019-05-01'),
  PARTITION p27 VALUES LESS THAN ('2019-06-01'),
  PARTITION p28 VALUES LESS THAN ('2019-07-01'),
  PARTITION p29 VALUES LESS THAN ('2019-08-01'),
  PARTITION p30 VALUES LESS THAN ('2019-09-01'),
  PARTITION p31 VALUES LESS THAN ('2019-10-01'),
  PARTITION p32 VALUES LESS THAN ('2019-11-01'),
  PARTITION p33 VALUES LESS THAN ('2019-12-01'),
  PARTITION p34 VALUES LESS THAN ('2020-01-01'),
  PARTITION p99 VALUES LESS THAN (MAXVALUE)
);

alter table insbworkflowmaintrack drop primary key, add primary key(id,createtime);

ALTER TABLE `insbworkflowmaintrack` PARTITION by RANGE COLUMNS(createtime) (
	PARTITION p1 VALUES LESS THAN ('2017-04-01'),
  PARTITION p2 VALUES LESS THAN ('2017-05-01'),
  PARTITION p3 VALUES LESS THAN ('2017-06-01'),
  PARTITION p4 VALUES LESS THAN ('2017-07-01'),
  PARTITION p5 VALUES LESS THAN ('2017-08-01'),
  PARTITION p6 VALUES LESS THAN ('2017-09-01'),
  PARTITION p7 VALUES LESS THAN ('2017-10-01'),
  PARTITION p8 VALUES LESS THAN ('2017-11-01'),
  PARTITION p9 VALUES LESS THAN ('2017-12-01'),
  PARTITION p10 VALUES LESS THAN ('2018-01-01'),
  PARTITION p11 VALUES LESS THAN ('2018-02-01'),
  PARTITION p12 VALUES LESS THAN ('2018-03-01'),
  PARTITION p13 VALUES LESS THAN ('2018-04-01'),
  PARTITION p14 VALUES LESS THAN ('2018-05-01'),
  PARTITION p15 VALUES LESS THAN ('2018-06-01'),
  PARTITION p16 VALUES LESS THAN ('2018-07-01'),
  PARTITION p17 VALUES LESS THAN ('2018-08-01'),
  PARTITION p18 VALUES LESS THAN ('2018-09-01'),
  PARTITION p19 VALUES LESS THAN ('2018-10-01'),
  PARTITION p20 VALUES LESS THAN ('2018-11-01'),
  PARTITION p21 VALUES LESS THAN ('2018-12-01'),
  PARTITION p22 VALUES LESS THAN ('2019-01-01'),
  PARTITION p23 VALUES LESS THAN ('2019-02-01'),
  PARTITION p24 VALUES LESS THAN ('2019-03-01'),
  PARTITION p25 VALUES LESS THAN ('2019-04-01'),
  PARTITION p26 VALUES LESS THAN ('2019-05-01'),
  PARTITION p27 VALUES LESS THAN ('2019-06-01'),
  PARTITION p28 VALUES LESS THAN ('2019-07-01'),
  PARTITION p29 VALUES LESS THAN ('2019-08-01'),
  PARTITION p30 VALUES LESS THAN ('2019-09-01'),
  PARTITION p31 VALUES LESS THAN ('2019-10-01'),
  PARTITION p32 VALUES LESS THAN ('2019-11-01'),
  PARTITION p33 VALUES LESS THAN ('2019-12-01'),
  PARTITION p34 VALUES LESS THAN ('2020-01-01'),
  PARTITION p99 VALUES LESS THAN (MAXVALUE)
);
