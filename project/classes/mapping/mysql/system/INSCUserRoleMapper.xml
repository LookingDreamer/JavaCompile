<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cninsure.system.entity">
	<!-- INSCUserRole -->
	<select id="INSCUserRole_insert" parameterType="com.cninsure.system.entity.INSCUserRole"
		resultType="int">
		insert into INSCUserRole
		(id,operator,createtime,modifytime,noti,userid,roleid,status)
		values
		(#{id},#{operator},#{createtime},#{modifytime},#{noti},#{userid},#{roleid},#{status})
	</select>
	<select id="INSCUserRole_select" parameterType="Map"
		resultType="com.cninsure.system.entity.INSCUserRole">
		select * from INSCUserRole
		<where>
			<if test="userid != null">
				and userid = #{userid}
			</if>
			<if test="roleid != null">
				and roleid = #{roleid}
			</if>
			<if test="status != null">
				and status = #{status}
			</if>
		</where>
	</select>
	<select id="INSCUserRole_selectOne" parameterType="Map"
		resultType="com.cninsure.system.entity.INSCUserRole">
		select * from INSCUserRole
		<where>
			<if test="userid != null">
				and userid = #{userid}
			</if>
			<if test="roleid != null">
				and roleid = #{roleid}
			</if>
			<if test="status != null">
				and status = #{status}
			</if>
		</where>
		LIMIT 2
	</select>
	<select id="INSCUserRole_selectById" parameterType="String"
		resultType="com.cninsure.system.entity.INSCUserRole">
		select * from INSCUserRole where id = #{value}
	</select>
	<select id="INSCUserRole_deleteById" parameterType="String">
		delete from
		INSCUserRole where id = #{value}
	</select>
	<select id="INSCUserRole_updateById" parameterType="com.cninsure.system.entity.INSCUserRole">
		update
		INSCUserRole set
		modifytime = #{modifytime},userid = #{userid},roleid =
		#{roleid},
		status = #{status},noti = #{noti}, operator = #{operator}
		where id =
		#{id}
	</select>
	<select id="INSCUserRole_selectCount" parameterType="Map"
		resultType="long">
		select count(1) from INSCUserRole
		<where>
			<if test="userid != null">
				and userid = #{userid}
			</if>
			<if test="roleid != null">
				and roleid = #{roleid}
			</if>
			<if test="status != null">
				and status = #{status}
			</if>
		</where>
	</select>

	<select id="INSCUserRole_selectRoleidByUserid" parameterType="String"
		resultType="String">
		select roleid from INSCUserRole
		<where>
			userid = #{userid}
		</where>
	</select>

	<select id="INSCUserRole_queryRoleIdsByUid" parameterType="String"
		resultType="String">
		select GROUP_CONCAT(r.id) FROM inscrole r,inscuserrole ur
		WHERE r.id = ur.roleid AND ur.status = "1" AND ur.userid = #{id}
	</select>

	<select id="INSCUserRole_selectOneByUidAndRid" parameterType="Map"
		resultType="String">
		select id from INSCUserRole
		<where>
			status = "1"
			<if test="userId != null">
				and userid = #{userId}
			</if>
			<if test="roleId != null">
				and roleid = #{roleId}
			</if>
		</where>
	</select>
	<select id="INSCUserRole_queryUsersByRoleId" parameterType="String"
		resultType="com.cninsure.system.entity.INSCUserRole">
		select userid from INSCUserRole where roleid=#{roleId}

	</select>
	<select id="INSCUserRole_queryPageUsersByRoleId" parameterType="Map" resultType="com.cninsure.system.entity.INSCUserRole">
		select userid from INSCUserRole
		 where roleid=#{roleId}
		order by createtime desc
		limit #{offset},#{limit}
	</select>
	<select id="INSCUserRole_queryPageCountUsersByRoleId" parameterType="Map" resultType="long">
		select count(1) from INSCUserRole where roleid=#{roleId}
	</select>
	<select id="INSCUserRole_deleteByUserIdRoleId" parameterType="Map"
		resultType="int">
		delete from INSCUserRole
		<where>
			<if test="userId !=null">
				 userid=#{userId}
			</if>
			<if test="roleId !=null">
				and roleid= #{roleId}
			</if>
		</where>
	</select>
</mapper>