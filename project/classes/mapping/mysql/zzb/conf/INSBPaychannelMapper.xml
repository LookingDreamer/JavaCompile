<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zzb.conf.entity">
	<!-- INSBPaychannel -->
	<select id="INSBPaychannel_insert" parameterType="com.zzb.conf.entity.INSBPaychannel" resultType="int">
		insert into INSBPaychannel
		(id,operator,createtime,modifytime,noti,paychannelname,sort,stateflag,paytype,supportterminal,paychannellimit,
		clientpayflag,channeldescribe,costratedescribe,showpoundageflag,chargepoundagefalg,ratio,poundageflag,poundageratio,
		fixedfee,creditpoundageratio,creditfixedfee,cashpoundageratio,cashfixedfee, clienttypes, onlyedionlineunderwriting)
		values
		(#{id},#{operator},#{createtime},#{modifytime},#{noti},#{paychannelname},#{sort},#{stateflag},#{paytype},#{supportterminal},#{paychannellimit},
		#{clientpayflag},#{channeldescribe},#{costratedescribe},#{showpoundageflag},#{chargepoundagefalg},
		#{ratio},#{poundageflag},#{poundageratio},#{fixedfee},#{creditpoundageratio},#{creditfixedfee},#{cashpoundageratio},
		#{cashfixedfee}, #{clienttypes}, #{onlyedionlineunderwriting})
	</select>
	<select id="INSBPaychannel_select" parameterType="Map" resultType="com.zzb.conf.entity.INSBPaychannel">
		select * from INSBPaychannel
		<where>
			<if test="paychannelname != null">
				and paychannelname = #{paychannelname}
			</if>
			<if test="sort != null">
				and sort = #{sort}
			</if>
			<if test="stateflag != null">
				and stateflag = #{stateflag}
			</if>
			<if test="paytype != null">
				and paytype = #{paytype}
			</if>
			<if test="supportterminal != null">
				and supportterminal = #{supportterminal}
			</if>
			<if test="paychannellimit != null">
				and paychannellimit = #{paychannellimit}
			</if>
			<if test="clientpayflag != null">
				and clientpayflag = #{clientpayflag}
			</if>
			<if test="channeldescribe != null">
				and channeldescribe = #{channeldescribe}
			</if>
			<if test="costratedescribe != null">
				and costratedescribe = #{costratedescribe}
			</if>
			<if test="showpoundageflag != null">
				and showpoundageflag = #{showpoundageflag}
			</if>
			<if test="chargepoundagefalg != null">
				and chargepoundagefalg = #{chargepoundagefalg}
			</if>
			<if test="ratio != null">
				and ratio = #{ratio}
			</if>
			<if test="poundageflag != null">
				and poundageflag = #{poundageflag}
			</if>
			<if test="poundageratio != null">
				and poundageratio = #{poundageratio}
			</if>
			<if test="fixedfee != null">
				and fixedfee = #{fixedfee}
			</if>
			<if test="creditpoundageratio != null">
				and creditpoundageratio = #{creditpoundageratio}
			</if>
			<if test="creditfixedfee != null">
				and creditfixedfee = #{creditfixedfee}
			</if>
			<if test="cashpoundageratio != null">
				and cashpoundageratio = #{cashpoundageratio}
			</if>
			<if test="cashfixedfee != null">
				and cashfixedfee = #{cashfixedfee}
			</if>
		</where>
		<if test="limit != null">
			limit #{offset},#{limit}
		</if>
	</select>
	<select id="INSBPaychannel_selectpaychannel" parameterType="Map" resultType="com.zzb.conf.entity.INSBPaychannel">
		select @rownum:=@rownum+1 as rownum,CASE WHEN    stateflag ='0' THEN '启用' 
		WHEN p.stateflag ='1' THEN '未启用' END stateflag ,  p.id,p.paychannelname,p.sort,DATE_FORMAT(p.modifytime,'%Y-%m-%d %H:%i:%s') updatetime,
		o.codename paytype
		 from insbpaychannel p  
		 LEFT JOIN insccode o ON o.codevalue = p.paytype 
		 LEFT JOIN (select @rownum:=0) b ON 1= 1
		<where>
			o.codetype = 'paytype'
			<if test="paychannelname != null">
				and paychannelname = #{paychannelname}
			</if>
			<if test="sort != null">
				and sort = #{sort}
			</if>
			<if test="stateflag != null">
				and stateflag = #{stateflag}
			</if>
			<if test="paytype != null">
				and paytype = #{paytype}
			</if>
			<if test="supportterminal != null">
				and supportterminal = #{supportterminal}
			</if>
			<if test="paychannellimit != null">
				and paychannellimit = #{paychannellimit}
			</if>
			<if test="clientpayflag != null">
				and clientpayflag = #{clientpayflag}
			</if>
			<if test="channeldescribe != null">
				and channeldescribe = #{channeldescribe}
			</if>
			<if test="costratedescribe != null">
				and costratedescribe = #{costratedescribe}
			</if>
			<if test="showpoundageflag != null">
				and showpoundageflag = #{showpoundageflag}
			</if>
			<if test="chargepoundagefalg != null">
				and chargepoundagefalg = #{chargepoundagefalg}
			</if>
			<if test="ratio != null">
				and ratio = #{ratio}
			</if>
			<if test="poundageflag != null">
				and poundageflag = #{poundageflag}
			</if>
			<if test="poundageratio != null">
				and poundageratio = #{poundageratio}
			</if>
			<if test="fixedfee != null">
				and fixedfee = #{fixedfee}
			</if>
			<if test="creditpoundageratio != null">
				and creditpoundageratio = #{creditpoundageratio}
			</if>
			<if test="creditfixedfee != null">
				and creditfixedfee = #{creditfixedfee}
			</if>
			<if test="cashpoundageratio != null">
				and cashpoundageratio = #{cashpoundageratio}
			</if>
			<if test="cashfixedfee != null">
				and cashfixedfee = #{cashfixedfee}
			</if>
		</where>
		order by 
		<if test="sort != null and order != null">
			  ${sort}  ${order}  
		</if>
		<if test="sort == null">
			 p.createtime desc 
		</if>
			limit #{offset},#{limit}
	</select>
	
	
	<select id="INSBPaychannel_selectById" parameterType="String" resultType="com.zzb.conf.entity.INSBPaychannel">
		select * from INSBPaychannel where id = #{id}
	</select>
	
	<select id="INSBPaychannel_selectPayChannelList"  resultType="Map">
		select * from INSBPaychannel
	</select>
	
	
	<select id="INSBPaychannel_deleteById" parameterType="String">
		delete from INSBPaychannel where id = #{id}
	</select>
	<select id="INSBPaychannel_updateById" parameterType="com.zzb.conf.entity.INSBPaychannel">
		update INSBPaychannel  set operator = #{operator},modifytime = #{modifytime},noti = #{noti},
		paychannelname = #{paychannelname},sort = #{sort},stateflag = #{stateflag},paytype = #{paytype},
		supportterminal = #{supportterminal},paychannellimit = #{paychannellimit},clientpayflag = #{clientpayflag},
		channeldescribe = #{channeldescribe},costratedescribe = #{costratedescribe},showpoundageflag = #{showpoundageflag},
		chargepoundagefalg = #{chargepoundagefalg},ratio = #{ratio},poundageflag = #{poundageflag},
		poundageratio = #{poundageratio},fixedfee = #{fixedfee},creditpoundageratio = #{creditpoundageratio},
		creditfixedfee = #{creditfixedfee},cashpoundageratio = #{cashpoundageratio},cashfixedfee = #{cashfixedfee},
		clienttypes=#{clienttypes}, onlyedionlineunderwriting=#{onlyedionlineunderwriting} where id = #{id}
	</select>
	<select id="INSBPaychannel_selectCount" parameterType="Map" resultType="Long">
		select count(1) from INSBPaychannel
		<where>
			<if test="paychannelname != null">
				and paychannelname = #{paychannelname}
			</if>
			<if test="sort != null">
				and sort = #{sort}
			</if>
			<if test="stateflag != null">
				and stateflag = #{stateflag}
			</if>
			<if test="paytype != null">
				and paytype = #{paytype}
			</if>
			<if test="supportterminal != null">
				and supportterminal = #{supportterminal}
			</if>
			<if test="paychannellimit != null">
				and paychannellimit = #{paychannellimit}
			</if>
			<if test="clientpayflag != null">
				and clientpayflag = #{clientpayflag}
			</if>
			<if test="channeldescribe != null">
				and channeldescribe = #{channeldescribe}
			</if>
			<if test="costratedescribe != null">
				and costratedescribe = #{costratedescribe}
			</if>
			<if test="showpoundageflag != null">
				and showpoundageflag = #{showpoundageflag}
			</if>
			<if test="chargepoundagefalg != null">
				and chargepoundagefalg = #{chargepoundagefalg}
			</if>
			<if test="ratio != null">
				and ratio = #{ratio}
			</if>
			<if test="poundageflag != null">
				and poundageflag = #{poundageflag}
			</if>
			<if test="poundageratio != null">
				and poundageratio = #{poundageratio}
			</if>
			<if test="fixedfee != null">
				and fixedfee = #{fixedfee}
			</if>
			<if test="creditpoundageratio != null">
				and creditpoundageratio = #{creditpoundageratio}
			</if>
			<if test="creditfixedfee != null">
				and creditfixedfee = #{creditfixedfee}
			</if>
			<if test="cashpoundageratio != null">
				and cashpoundageratio = #{cashpoundageratio}
			</if>
			<if test="cashfixedfee != null">
				and cashfixedfee = #{cashfixedfee}
			</if>
		</where>
	</select>

	<select id="INSBPaychannel_selectPayChannelListByAgreementId" parameterType="Map" resultType="com.zzb.conf.entity.INSBPaychannel">
		SELECT * FROM INSBPaychannel INNER JOIN insbpaychannelmanager ON deptid IN(#{ptdeptcode},#{deptcode}) AND providerid=#{providerid} AND stateflag = '0'
		AND insbpaychannelmanager.paychannelid = insbpaychannel.id GROUP BY paychannelid
	</select>
</mapper>