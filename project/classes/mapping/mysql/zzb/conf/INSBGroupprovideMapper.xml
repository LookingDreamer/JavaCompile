<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zzb.conf.entity">
	<!-- INSBGroupprovide -->
	<select id="INSBGroupprovide_insert" parameterType="com.zzb.conf.entity.INSBGroupprovide" resultType="int">
		insert into INSBGroupprovide
		(id,operator,createtime,modifytime,noti,groupid,provideid) 
		values
		(#{id},#{operator},#{createtime},#{modifytime},#{noti},#{groupid},#{provideid}) 
	</select>
	<select id="INSBGroupprovide_select" parameterType="Map" resultType="com.zzb.conf.entity.INSBGroupprovide">
		select * from INSBGroupprovide
		<where>
			<if test="groupid != null">
				and groupid = #{groupid}
			</if>
			<if test="provideid != null">
				and provideid = #{provideid}
			</if>
		</where>
	</select>
	
	<select id="INSBGroupprovide_selectGroupIdByProvideid" parameterType="String" resultType="String">
		select groupid from INSBGroupprovide where  provideid = #{value}
	</select>

	<select id="INSBGroupprovide_selectNoProvideGroupId" resultType="String">
		select id FROM  insbbusinessmanagegroup g WHERE NOT EXISTS(
			select 1 FROM INSBGroupprovide gp WHERE g.`id` = gp.`groupid`
		)
	</select>
	
	<select id="INSBGroupprovide_selectOne" parameterType="Map" resultType="com.zzb.conf.entity.INSBGroupprovide">
		select * from INSBGroupprovide
		<where>
			<if test="groupid != null">
				and groupid = #{groupid}
			</if>
			<if test="provideid != null">
				and provideid = #{provideid}
			</if>
		</where>
		LIMIT 2
	</select>	
	<select id="INSBGroupprovide_selectById" parameterType="String" resultType="com.zzb.conf.entity.INSBGroupprovide">
		select * from INSBGroupprovide where id = #{id}
	</select>
	<select id="INSBGroupprovide_selectByGroupId" parameterType="String" resultType="com.zzb.conf.entity.INSBGroupprovide">
		select * from INSBGroupprovide where groupid = #{groupId}
		AND provideid != ''
	</select>
	<select id="INSBGroupprovide_deleteById" parameterType="String">
		delete from INSBGroupprovide where id = #{id}
	</select>
	<select id="INSBGroupprovide_deleteByGroupId" parameterType="String">
		delete from INSBGroupprovide where groupid = #{groupId}
	</select>
	<select id="INSBGroupprovide_selectprovidebygroupid" parameterType="map" resultType="com.zzb.conf.entity.INSBProvider">
		SELECT
		  g.id as id,
          s.prvcode ,
          s.prvname 
           FROM insbprovider AS s
          LEFT JOIN insbgroupprovide AS g ON s.id = g.provideid
          WHERE
           g.groupid = #{groupid} order by g.createtime desc limit #{offset},#{limit}
	</select>
	<select id="INSBGroupprovide_deleteByProviderId" parameterType="String">
		delete from INSBGroupprovide where provideid = #{provideId}
	</select>
	<select id="INSBGroupprovide_updateById" parameterType="com.zzb.conf.entity.INSBGroupprovide">
		update INSBGroupprovide  set operator = #{operator},modifytime = #{modifytime},noti = #{noti},groupid = #{groupid},provideid = #{provideid} where id = #{id}
	</select>
	<select id="INSBGroupprovide_selectCount" parameterType="Map" resultType="Long">
		select count(1) from INSBGroupprovide
		<where>
			<if test="groupid != null">
				and groupid = #{groupid}
			</if>
			<if test="provideid != null">
				and provideid = #{provideid}
			</if>
		</where>
	</select>
</mapper>